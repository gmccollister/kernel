From a233564b0d3df7402647f03247d2590b4f70197b Mon Sep 17 00:00:00 2001
From: Felipe Balbi <balbi@ti.com>
Date: Thu, 13 Oct 2011 11:34:53 +0300
Subject: [PATCH 0354/1092] cbus: tahvo: drop the get_status hack

that's really not needed.

Signed-off-by: Felipe Balbi <balbi@ti.com>
Signed-off-by: Tony Lindgren <tony@atomide.com>
---
 drivers/cbus/tahvo-usb.c | 4 ----
 drivers/cbus/tahvo.c     | 6 ------
 drivers/cbus/tahvo.h     | 1 -
 3 files changed, 11 deletions(-)

diff --git a/drivers/cbus/tahvo-usb.c b/drivers/cbus/tahvo-usb.c
index e078440..04fe770 100644
--- a/drivers/cbus/tahvo-usb.c
+++ b/drivers/cbus/tahvo-usb.c
@@ -594,10 +594,6 @@ static int __init tahvo_usb_probe(struct platform_device *pdev)
 	int ret;
 	int irq;
 
-	ret = tahvo_get_status();
-	if (!ret)
-		return -ENODEV;
-
 	dev_dbg(dev, "probe\n");
 
 	/* Create driver data */
diff --git a/drivers/cbus/tahvo.c b/drivers/cbus/tahvo.c
index ab6e7ea..2597672 100644
--- a/drivers/cbus/tahvo.c
+++ b/drivers/cbus/tahvo.c
@@ -59,12 +59,6 @@ struct tahvo {
 
 static struct tahvo *the_tahvo;
 
-int tahvo_get_status(void)
-{
-	return the_tahvo != NULL;
-}
-EXPORT_SYMBOL(tahvo_get_status);
-
 /**
  * __tahvo_read_reg - Reads a value from a register in Tahvo
  * @tahvo: pointer to tahvo structure
diff --git a/drivers/cbus/tahvo.h b/drivers/cbus/tahvo.h
index b2f195f..3c0b381 100644
--- a/drivers/cbus/tahvo.h
+++ b/drivers/cbus/tahvo.h
@@ -50,7 +50,6 @@
 
 #define MAX_TAHVO_IRQ_HANDLERS	8
 
-int tahvo_get_status(void);
 int tahvo_read_reg(unsigned reg);
 void tahvo_write_reg(unsigned reg, u16 val);
 void tahvo_set_clear_reg_bits(unsigned reg, u16 set, u16 clear);
-- 
1.7.11.2


From 75462c767acadeb60a48fdbd4d5ed0a72a704399 Mon Sep 17 00:00:00 2001
From: "Raj, Deepu" <deepu.raj@ti.com>
Date: Mon, 21 Nov 2011 12:29:20 +0530
Subject: [PATCH 0867/1092] ARM: OMAP2+: ALSA : ASoC tlv320aic3x.c
 suspend/resume cache_sync fix

 This patch fixes audio resume failure. AIC3X codec driver is not
 generating disable regulator event due to unknown reason.
 Need to revisit the patch to find the reason and fix the same.

Signed-off-by: Raj, Deepu <deepu.raj@ti.com>
Signed-off-by: Hebbar, Gururaja <gururaja.hebbar@ti.com>
---
 sound/soc/codecs/tlv320aic3x.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/sound/soc/codecs/tlv320aic3x.c b/sound/soc/codecs/tlv320aic3x.c
index 8b48801..cdb473c 100644
--- a/sound/soc/codecs/tlv320aic3x.c
+++ b/sound/soc/codecs/tlv320aic3x.c
@@ -1145,6 +1145,11 @@ static int aic3x_set_power(struct snd_soc_codec *codec, int power)
 		codec->cache_only = 1;
 		ret = regulator_bulk_disable(ARRAY_SIZE(aic3x->supplies),
 					     aic3x->supplies);
+		/* Enable cache sync if regulator disable
+		 * event is not triggerd.
+		 * ToDo : Revisit later to fix it
+		 */
+		codec->cache_sync = 1;
 	}
 out:
 	return ret;
-- 
1.7.11.2


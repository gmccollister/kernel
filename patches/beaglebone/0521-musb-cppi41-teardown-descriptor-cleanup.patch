From 54bb1b28f60639782fbb42dd57a48d5888624503 Mon Sep 17 00:00:00 2001
From: Ajay Kumar Gupta <ajay.gupta@ti.com>
Date: Tue, 1 Feb 2011 16:58:07 +0530
Subject: [PATCH 0521/1092] musb: cppi41: teardown descriptor cleanup

Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com>
---
 drivers/usb/musb/cppi41_dma.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/usb/musb/cppi41_dma.c b/drivers/usb/musb/cppi41_dma.c
index a0abca5..6d3ae73 100644
--- a/drivers/usb/musb/cppi41_dma.c
+++ b/drivers/usb/musb/cppi41_dma.c
@@ -988,7 +988,7 @@ static void usb_rx_ch_teardown(struct cppi41_channel *rx_ch)
 			pd_addr = cppi41_queue_pop(&cppi->queue_obj);
 		} while (!pd_addr && timeout--);
 
-		if (timeout <= 0) {
+		if (timeout <= 0 || !pd_addr) {
 			ERR("teardown Desc not found\n");
 			break;
 		}
-- 
1.7.11.2

